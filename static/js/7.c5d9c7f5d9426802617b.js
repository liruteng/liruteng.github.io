webpackJsonp([7],{"/U/C":function(e,t){},QrVH:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("84iU"),o=n.n(a),s=n("wSez"),r=(n("5OHe"),{name:"login",data:function(){return{username:"",code:"",text:"",btntxt:"获取验证码",timer:"",btnoff:!0,r:{},yan:""}},watch:{$route:{deep:!0,handler:function(e,t){this.r=e.query}}},methods:{fn:function(){var e=this;o.a.post("/apis/login",{username:this.username,code:this.code}).then(function(t){e.text=t.data.msg,t.data.code?Object(s.Toast)({message:"操作失败",iconClass:"icon icon-success",duration:1e3}):(Object(s.Toast)({message:"操作成功",iconClass:"icon icon-success",duration:1e3}),localStorage.setItem("id",e.code),e.r.redirect?e.$router.push({path:e.r.redirect}):e.$router.push({name:"recommend"}))})},getCode:function(){var e=this;this.btnoff&&(s.Indicator.open({text:"加载中...",spinnerType:"fading-circle"}),o.a.post("/apis/code",{username:this.username}).then(function(t){if(s.Indicator.close(),e.yan=t.data,t.data.code){var n=30;e.btnoff=!1,e.timer=setInterval(function(){e.btntxt=n+"秒后重发",0==n&&(e.btnoff=!0,e.btntxt="获取验证码",clearInterval(e.timer)),n--},1e3)}}))}}}),i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrap"},[n("p",{staticClass:"title"},[e._v("用户登录")]),e._v(" "),n("div",{staticClass:"inp"},[n("p",[e._v(e._s(e.text))]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",placeholder:"请输入手机号"},domProps:{value:e.username},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getCode(t)},input:function(t){t.target.composing||(e.username=t.target.value)}}}),e._v(" "),n("div",{staticClass:"id"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],attrs:{type:"text",placeholder:"请输入验证码"},domProps:{value:e.code},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.fn(t)},input:function(t){t.target.composing||(e.code=t.target.value)}}}),e._v(" "),n("p",{on:{click:e.getCode}},[e._v(e._s(e.btntxt))])])]),e._v(" "),n("p",{staticClass:"btn",on:{click:e.fn}},[e._v("登录")]),e._v(" "),n("p",{staticClass:"tips"},[n("router-link",{attrs:{to:"/register"}},[e._v("还没有账号,现在去注册")])],1),e._v(" "),n("p",[e._v(e._s(e.yan.code))])])},staticRenderFns:[]};var c=n("C7Lr")(r,i,!1,function(e){n("/U/C")},"data-v-d070b1c6",null);t.default=c.exports}});
//# sourceMappingURL=7.c5d9c7f5d9426802617b.js.map